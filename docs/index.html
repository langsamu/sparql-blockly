<!DOCTYPE html>
<html lang="en">
<head>
    <title>SPARQL Blockly</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width = device-width, initial-scale = 1.0" />
    <meta name="description" content="A SPARQL builder and visualiser using Blockly" />

    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#757575">
    <link rel="shortcut icon" href="icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="SPARQL Blockly">
    <meta name="application-name" content="SPARQL Blockly">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <script type="application/ld+json">
        {
            "@type": "WebApplication",
            "name": "SPARQ Blockly",
            "description": "A SPARQL builder and visualiser using Blockly",
            "applicationCategory": "Developer tool",
            "url": "https://langsamu.github.io/sparql-blockly/",
            "author": {
                "@type": "Person",
                "image": "https://www.gravatar.com/avatar/834f388835634496ddba0e9b9e97c457",
                "name": "Samu Lang",
                "url": ["https://twitter.com/langsamu", "https://github.com/langsamu/", "https://www.linkedin.com/in/langsamu/"]
            },
            "license": "https://github.com/langsamu/sparql-blockly/blob/main/LICENSE",
            "browserRequirements": "Requires JavaScript. Requires Chrome ^54, Edge ^80, Firefox ^63, Opera ^41 or Safari ^10",
            "operatingSystem": "All",
            "softwareVersion": "0.0.4-5",
            "screenshot": "https://repository-images.githubusercontent.com/353815277/9e561900-93ad-11eb-8794-0b1b1645e92c",
            "downloadUrl": "https://github.com/langsamu/sparql-blockly",
            "genre": "technical",
            "@context": "http://schema.org"
        }
    </script>

    <link href="style.css" rel="stylesheet" />
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <script src="https://unpkg.com/sparql-blockly/sparql-blockly.min.js"></script>
    <script src="app.js" defer></script>
</head>
<body>
    <app-main>
        <sparql-editor>
            <label for="sparql" hidden>SPARQL editor</label>
            <textarea placeholder="Write SPARQL here" name="sparql"></textarea>
            <span></span>
        </sparql-editor>
        <blockly-canvas toolbox-data="toolbox.xml"></blockly-canvas>
    </app-main>
    <details>
        <summary>
            <span title="Help" class="closed">❓</span>
            <span title="Close help" class="open">❌</span>
        </summary>
        <section>
            <aside>TL;DR: <a href="#SELECT%20*%20WHERE%20%7B%20%3Fs%20%3Fp%20%3Fo%20.%20%7D">Visualise</a> this SPARQL query:<br /><code>SELECT * WHERE { ?s ?p ?o . }</code></aside>

            <h1>SPARQL Blockly</h1>
            <p>SPARQL Blockly is an app for visualising and constructing <a href="https://www.w3.org/TR/sparql11-query/">SPARQL queries</a>.</p>
            <p>It supports SPARQL 1.1 Query <small>(<a href="#ASK%20%7B%7D">try</a>)</small>, Update <small>(<a href="#DROP%20ALL">try</a>)</small> and SPARQL* <small>(<a href="#SELECT%20(<<%20%3Fs%20%3Fp%20%3Fo%20>>%20AS%20%3Ft)%20%7B%7D">try</a>)</small>.</p>

            <p><small>See the Source code on <a href="https://github.com/langsamu/sparql-blockly/">Github</a>.</small></p>
            <p><small>Use the JavaScript library from <a href="https://github.com/langsamu/sparql-blockly/">npm</a>.</small></p>

            <h2>Features</h2>

            <h3>Parsing</h3>
            <p>Text written into the textarea at the top is parsed by <a href="https://github.com/RubenVerborgh/SPARQL.js/">SPARQL.js</a>. Valid queries are visualised into blocks on the canvas below:</p>
            <iframe width="200" height="248" src="https://www.youtube.com/embed/oBKiRb92g58" title="Parsing video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <p>The textarea will turn green for a valid and red for an invalid query.</p>
            <p>Parsing errors for invalid queries are displayed below the textarea.</p>

            <h3>Context menus</h3>
            <p>Query blocks can be constructed by right-clicking the canvas and the blocks to add appropriate clauses from the context menus:</p>
            <iframe width="200" height="248" src="https://www.youtube.com/embed/HuSYr2h-vgA" title="Context menus video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <p>Only appropriate blocks can be added, so the context menus enforce the SPARQL grammar.</p>

            <h3>Drag & drop</h3>
            <p>Queries can also be constructed by dragging blocks from the toolbox, dropping them unto the canvas and attaching them to existing blocks:</p>
            <iframe width="200" height="248" src="https://www.youtube.com/embed/Whyk-CIfbW4" title="Drag & drop video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <p>Only appropriate blocks can be attached.</p>

            <h3>Collapsing/expanding blocks</h3>
            <p>Blocks can be collapsed from the context menus:</p>
            <iframe width="200" height="248" src="https://www.youtube.com/embed/dK-l8aNd8hk" title="Collapse/expand video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <p>Collapsed blocks show the SPARQL they represent.</p>

            <h3>Sharing</h3>
            <p>The app takes URL-encoded SPARQL queries from the URL fragment, so queries and their visual representations can be shared.</p>
        </section>
    </details>
</body>
</html>